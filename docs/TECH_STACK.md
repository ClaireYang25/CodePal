# æŠ€æœ¯æž¶æž„ä¸ŽæŠ€æœ¯æ ˆ

## ðŸŽ¯ æ ¸å¿ƒæŠ€æœ¯ä¼˜åŠ¿

### 1. ä¸‰å±‚æ™ºèƒ½è¯†åˆ«å¼•æ“Ž

```
ç”¨æˆ·æ‰“å¼€Gmailé‚®ä»¶
    â†“
ã€ç¬¬ä¸€å±‚ã€‘æœ¬åœ°æ­£åˆ™åŒ¹é… (OTP Engine)
    â”œâ”€ ç½®ä¿¡åº¦ > 0.8 â†’ âœ… ç›´æŽ¥è¿”å›ž
    â””â”€ ç½®ä¿¡åº¦ < 0.8 â†’ è¿›å…¥ç¬¬äºŒå±‚
        â†“
ã€ç¬¬äºŒå±‚ã€‘Gemini Nano (è®¾å¤‡ç«¯AI)
    â”œâ”€ æˆåŠŸè¯†åˆ« â†’ âœ… è¿”å›žç»“æžœ
    â””â”€ å¤±è´¥/ä¸å¯ç”¨ â†’ è¿›å…¥ç¬¬ä¸‰å±‚
        â†“
ã€ç¬¬ä¸‰å±‚ã€‘Gemini API (äº‘ç«¯å¤‡ç”¨)
    â””â”€ æœ€ç»ˆç»“æžœ â†’ âœ… è¿”å›ž
```

**ä¼˜åŠ¿**ï¼š
- âš¡ **å¿«é€Ÿ**ï¼š90% åœºæ™¯é€šè¿‡æœ¬åœ°æ­£åˆ™å®Œæˆï¼Œæ¯«ç§’çº§å“åº”
- ðŸ”’ **éšç§**ï¼šä¼˜å…ˆè®¾å¤‡ç«¯å¤„ç†ï¼Œæ— éœ€ä¸Šä¼ é‚®ä»¶å†…å®¹
- ðŸŽ¯ **å‡†ç¡®**ï¼šAI å¤„ç†å¤æ‚åœºæ™¯ï¼Œè¯†åˆ«çŽ‡æŽ¥è¿‘ 100%

### 2. Chrome Extension Manifest V3 æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  manifest.json                  â”‚
â”‚          (æ‰©å±•é…ç½®æ–‡ä»¶ - æƒé™å£°æ˜Ž)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â†“             â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service      â”‚ â”‚ Content      â”‚ â”‚ Offscreen    â”‚
â”‚ Worker       â”‚ â”‚ Script       â”‚ â”‚ Document     â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚ â€¢ æ¶ˆæ¯è·¯ç”±    â”‚ â”‚ â€¢ DOMç›‘å¬    â”‚ â”‚ â€¢ Gemini     â”‚
â”‚ â€¢ è®¤è¯ç®¡ç†    â”‚ â”‚ â€¢ OTPæå–    â”‚ â”‚   Nano       â”‚
â”‚ â€¢ AIè°ƒåº¦     â”‚ â”‚ â€¢ è‡ªåŠ¨å¡«å……    â”‚ â”‚ â€¢ çª—å£ä¸Šä¸‹æ–‡  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
              chrome.runtime
              æ¶ˆæ¯é€šä¿¡æœºåˆ¶
```

**æ ¸å¿ƒç»„ä»¶**ï¼š

#### Service Worker (`src/background/service-worker.js`)
- ðŸ” Gmail OAuth è®¤è¯
- ðŸ“¨ æ¶ˆæ¯è·¯ç”±å’Œè½¬å‘
- ðŸ¤– AI æœåŠ¡è°ƒåº¦
- ðŸ’¾ æ•°æ®å­˜å‚¨ç®¡ç†

#### Content Script (`src/content/gmail-monitor.js`)
- ðŸ‘€ ç›‘å¬ Gmail DOM å˜åŒ–
- ðŸ“§ æå–é‚®ä»¶å†…å®¹
- âœï¸ è‡ªåŠ¨å¡«å…… OTP
- ðŸ”” æ˜¾ç¤ºç”¨æˆ·é€šçŸ¥

#### Offscreen Document (`src/offscreen/`)
- ðŸ§  è¿è¡Œ Gemini Nano
- ðŸªŸ æä¾›çª—å£ä¸Šä¸‹æ–‡
- ðŸ”Œ ç‹¬ç«‹çš„ AI å¤„ç†çŽ¯å¢ƒ

### 3. æ¨¡å—åŒ–ä»£ç æž¶æž„

```
src/
â”œâ”€â”€ core/                   # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ otp-engine.js       # æœ¬åœ°è¯†åˆ«å¼•æ“Žï¼ˆæ­£åˆ™è§„åˆ™ï¼‰
â”‚
â”œâ”€â”€ services/               # å¤–éƒ¨æœåŠ¡é›†æˆ
â”‚   â”œâ”€â”€ ai-service.js       # Gemini API æœåŠ¡
â”‚   â””â”€â”€ gmail-service.js    # Gmail API æœåŠ¡
â”‚
â”œâ”€â”€ background/             # åŽå°å¤„ç†
â”‚   â””â”€â”€ service-worker.js   # Service Worker
â”‚
â”œâ”€â”€ content/                # é¡µé¢æ³¨å…¥
â”‚   â””â”€â”€ gmail-monitor.js    # Gmail é¡µé¢ç›‘å¬
â”‚
â”œâ”€â”€ offscreen/              # AI å¤„ç†
â”‚   â”œâ”€â”€ offscreen.html
â”‚   â””â”€â”€ offscreen.js        # Gemini Nano è¿è¡ŒçŽ¯å¢ƒ
â”‚
â””â”€â”€ ui/                     # ç”¨æˆ·ç•Œé¢
    â”œâ”€â”€ popup.html
    â””â”€â”€ popup.js            # å¼¹çª—æŽ§åˆ¶å™¨
```

**è®¾è®¡åŽŸåˆ™**ï¼š
- âœ… **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªæ¨¡å—ä¸“æ³¨ä¸€ä¸ªåŠŸèƒ½
- âœ… **æ¾è€¦åˆ**ï¼šé€šè¿‡æ¶ˆæ¯é€šä¿¡è§£è€¦
- âœ… **å¯æµ‹è¯•**ï¼šæ ¸å¿ƒé€»è¾‘ç‹¬ç«‹å¯æµ‹
- âœ… **å¯æ‰©å±•**ï¼šæ˜“äºŽæ·»åŠ æ–°åŠŸèƒ½

## ðŸ› ï¸ æŠ€æœ¯é€‰åž‹

### 1. Gemini Nano (Chrome Prompt API)

**ä¸ºä»€ä¹ˆé€‰æ‹© Gemini Nanoï¼Ÿ**
- ðŸ”’ **éšç§ä¼˜å…ˆ**ï¼šå®Œå…¨åœ¨è®¾å¤‡ç«¯è¿è¡Œï¼Œæ•°æ®ä¸ç¦»å¼€æœ¬åœ°
- âš¡ **ä½Žå»¶è¿Ÿ**ï¼šæ— éœ€ç½‘ç»œè¯·æ±‚ï¼Œå“åº”é€Ÿåº¦å¿«
- ðŸ’° **é›¶æˆæœ¬**ï¼šæ—  API è°ƒç”¨è´¹ç”¨
- ðŸŽ¯ **ä¸“ä¸º Chrome ä¼˜åŒ–**ï¼šåŽŸç”Ÿæ”¯æŒï¼Œé›†æˆç®€å•

**å®žçŽ°æ–¹å¼**ï¼š
```javascript
// åœ¨ offscreen.js ä¸­
const session = await globalThis.LanguageModel.create();
const result = await session.prompt(promptText);
```

### 2. Gemini API (äº‘ç«¯å¤‡ç”¨)

**ä¸ºä»€ä¹ˆéœ€è¦äº‘ç«¯å¤‡ç”¨ï¼Ÿ**
- ðŸ“± **è®¾å¤‡å…¼å®¹æ€§**ï¼šéƒ¨åˆ†è®¾å¤‡ä¸æ”¯æŒ Gemini Nano
- ðŸ§  **å¤æ‚åœºæ™¯**ï¼šæžç«¯æƒ…å†µä¸‹éœ€è¦æ›´å¼ºå¤§çš„æ¨¡åž‹
- ðŸ”„ **æ¸è¿›å¢žå¼º**ï¼šç¡®ä¿åŠŸèƒ½åœ¨æ‰€æœ‰çŽ¯å¢ƒä¸‹å¯ç”¨

**å®žçŽ°æ–¹å¼**ï¼š
```javascript
// åœ¨ ai-service.js ä¸­
const response = await fetch(
  `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent`,
  { method: 'POST', body: JSON.stringify(prompt) }
);
```

### 3. Gmail API

**æƒé™è®¾è®¡**ï¼š
- âœ… ä»…ä½¿ç”¨ `gmail.readonly` æƒé™
- âœ… é€šè¿‡ OAuth 2.0 è®¤è¯
- âœ… ç¬¦åˆ Google æœ€ä½³å®žè·µ

**API è°ƒç”¨**ï¼š
```javascript
// èŽ·å–æœ€æ–°é‚®ä»¶
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10
```

## ðŸ” å®‰å…¨ä¸Žéšç§

### éšç§ä¿æŠ¤æŽªæ–½

1. **æœ€å°æƒé™åŽŸåˆ™**
   - ä»…ç”³è¯·å¿…è¦æƒé™
   - `gmail.readonly` è€Œéž `gmail.modify`

2. **æœ¬åœ°ä¼˜å…ˆå¤„ç†**
   - 90% åœºæ™¯ä½¿ç”¨æœ¬åœ°æ­£åˆ™
   - AI ä»…åœ¨å¿…è¦æ—¶è°ƒç”¨

3. **æ•°æ®ä¸å­˜å‚¨**
   - ä¸ä¿å­˜å®Œæ•´é‚®ä»¶å†…å®¹
   - OTP 5åˆ†é’ŸåŽè‡ªåŠ¨è¿‡æœŸ
   - å¯éšæ—¶æ¸…é™¤æ‰€æœ‰æ•°æ®

4. **é€æ˜Žåº¦**
   - å¼€æºä»£ç å¯å®¡è®¡
   - æ˜Žç¡®å‘ŠçŸ¥ç”¨æˆ·æ•°æ®æµå‘

### Content Security Policy

```json
{
  "content_security_policy": {
    "extension_pages": "script-src 'self'; object-src 'self'"
  }
}
```

## ðŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. åˆ†å±‚å¤„ç†ç­–ç•¥

| å±‚çº§ | å¤„ç†æ—¶é—´ | è¦†ç›–çŽ‡ | éšç§ä¿æŠ¤ |
|------|---------|--------|---------|
| æœ¬åœ°æ­£åˆ™ | < 10ms | ~90% | â­â­â­â­â­ |
| Gemini Nano | < 500ms | ~9% | â­â­â­â­â­ |
| Gemini API | < 2s | ~1% | â­â­â­ |

### 2. ç¼“å­˜æœºåˆ¶

- å·²å¤„ç†é‚®ä»¶åŽ»é‡ï¼ˆé¿å…é‡å¤è¯†åˆ«ï¼‰
- OTP æœ¬åœ°ç¼“å­˜ï¼ˆ5åˆ†é’Ÿæœ‰æ•ˆæœŸï¼‰
- AI ä¼šè¯å¤ç”¨ï¼ˆå‡å°‘åˆå§‹åŒ–å¼€é”€ï¼‰

### 3. å¼‚æ­¥å¤„ç†

- æ‰€æœ‰ API è°ƒç”¨å‡ä¸ºå¼‚æ­¥
- ä¸é˜»å¡ž UI çº¿ç¨‹
- æ¶ˆæ¯é€šä¿¡ä½¿ç”¨ Promise åŒ…è£…

## ðŸŽ¨ ç”¨æˆ·ä½“éªŒè®¾è®¡

### 1. æ— æ„Ÿè¯†åˆ«

```
ç”¨æˆ·æ‰“å¼€é‚®ä»¶
    â†“
åŽå°è‡ªåŠ¨è¯†åˆ« (æ— æ„ŸçŸ¥)
    â†“
é€šçŸ¥æ˜¾ç¤º (3ç§’åŽè‡ªåŠ¨æ¶ˆå¤±)
    â†“
è‡ªåŠ¨å¡«å……åˆ°è¾“å…¥æ¡† (å½“ç„¦ç‚¹åœ¨OTPè¾“å…¥æ¡†æ—¶)
```

### 2. æ¸è¿›å¼å¢žå¼º

- âœ… åŸºç¡€åŠŸèƒ½ï¼šæœ¬åœ°æ­£åˆ™ + æ‰‹åŠ¨å¤åˆ¶
- âœ… å¢žå¼ºåŠŸèƒ½ï¼šGemini Nano æ™ºèƒ½è¯†åˆ«
- âœ… é«˜çº§åŠŸèƒ½ï¼šè‡ªåŠ¨å¡«å…… + è·¨æ ‡ç­¾é¡µ

### 3. é”™è¯¯å¤„ç†

- å‹å¥½çš„é”™è¯¯æç¤º
- é™çº§ç­–ç•¥ï¼ˆAI å¤±è´¥ â†’ æ‰‹åŠ¨å¤åˆ¶ï¼‰
- è¯¦ç»†çš„æ—¥å¿—ä¾›å¼€å‘è€…è°ƒè¯•

## ðŸš€ æŠ€æœ¯åˆ›æ–°ç‚¹

1. **ä¸‰å±‚æ™ºèƒ½å¼•æ“Ž**
   - ä¸šç•Œé¦–ä¸ªç»“åˆæœ¬åœ°æ­£åˆ™ + è®¾å¤‡ç«¯AI + äº‘ç«¯AI çš„æ–¹æ¡ˆ

2. **Offscreen Document æž¶æž„**
   - åˆ›æ–°ä½¿ç”¨ Offscreen Document è¿è¡Œ Gemini Nano
   - è§£å†³ Service Worker æ— çª—å£ä¸Šä¸‹æ–‡é™åˆ¶

3. **å¤šè¯­è¨€ OTP è¯†åˆ«**
   - æ”¯æŒä¸­è‹±è¥¿æ„å››ç§è¯­è¨€
   - å¯è½»æ¾æ‰©å±•åˆ°æ›´å¤šè¯­è¨€

4. **éšç§ä¼˜å…ˆè®¾è®¡**
   - æœ¬åœ°ä¼˜å…ˆï¼ŒAI å¢žå¼º
   - ç¬¦åˆ GDPR å’Œéšç§æ³•è§„

## ðŸ“ˆ å¯æ‰©å±•æ€§

### æœªæ¥å¯èƒ½çš„æ‰©å±•æ–¹å‘

1. **æ”¯æŒæ›´å¤šé‚®ç®±**
   - Outlookã€Yahoo Mail
   - ä¼ä¸šé‚®ç®±ç³»ç»Ÿ

2. **æ”¯æŒæ›´å¤šå¹³å°**
   - Firefox æ‰©å±•
   - Edge æ‰©å±•

3. **æ›´å¤šéªŒè¯åœºæ™¯**
   - SMS éªŒè¯ç 
   - äºŒç»´ç æ‰«æ

4. **æ™ºèƒ½å­¦ä¹ **
   - ç”¨æˆ·ä¹ æƒ¯å­¦ä¹ 
   - è‡ªå®šä¹‰è§„åˆ™

---

**æŠ€æœ¯æ ˆæ€»ç»“**ï¼šçŽ°ä»£åŒ–ã€æ¨¡å—åŒ–ã€å®‰å…¨ã€é«˜æ€§èƒ½çš„ Chrome æ‰©å±•æž¶æž„ ðŸš€
